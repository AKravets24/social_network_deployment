{"version":3,"sources":["components/content/users/usersContainer.tsx"],"names":["UsersFuncContainer","smartData","useSelector","getSmartUsersMediaData","dialogsACs","getDialogsACs_compUsers","usersACs","getUsersACs","colorTheme","getColorTheme","themesDelayFlag","getThemesDelayFlag","dispatch","useDispatch","usersActions","getUsersThunk","pageSize","currentPage","getUsersThunkAC","setCurrentPageThunk","setCurrentPageThunkAC","followThunkToggler","userId","isFollowed","error","followThunkTogglerAC","getCertainUserThunk","userName","pageOfEquals","getCertainUserThunkAC","sendMessageToUserThunk","body","actionKey","sendMessageToUserThunkAC","setErrorToNull","setErrorToNullAC","componentStateCleaner","unMountCleaner","history","useHistory","queryRequest","useLocation","search","parsedString","queryString","useState","wasClicked","setWasClicked","useEffect","Number","isInteger","pageFromLink","Math","trunc","push","pathname","termValue","term","userPageDnmc","generalHeaderDnmc","pagBTNDnmc","paginationSelectedDnmc","paginationDnmc","searchInputDnmc","userAvaDnmc","followBTNDnmc","followBTN_ERR_DNMC","userNameDnmc","mapWrapperDnmc","userUnitDnmc","userWriteModeDnmc","moreUserUnitsDnmc","themes","setThemes","stl","usersPageN","generalHeaderN","pagBTN_N","paginationSelectedN","paginationN","searchInputN","userAvaN","followBTN_N","followBTN_ERR_N","userNameN","mapWrapperN","userUnitN","userWriteModeN","moreUserUnitsN","usersPageM","generalHeaderM","pagBTN_M","paginationSelectedM","paginationM","searchInputM","userAvaM","followBTN_M","followBTN_ERR_M","userNameM","mapWrapperM","userUnitM","userWriteModeM","moreUserUnitsM","usersPageD","generalHeaderD","pagBTN_D","paginationSelectedD","paginationD","searchInputD","userAvaD","followBTN_D","followBTN_ERR_D","userNameD","mapWrapperD","userUnitD","userWriteModeD","moreUserUnitsD","usersPageE","generalHeaderE","pagBTN_E","paginationSelectedE","paginationE","searchInputE","userAvaE","followBTN_E","followBTN_ERR_E","userNameE","mapWrapperE","userUnitE","userWriteModeE","moreUserUnitsE","usersInfo","usersFuncs","delayFlag"],"mappings":"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","file":"static/js/11.1565f6c5.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { Users } from './users';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport stl from \"./users.module.css\";\r\nimport {\r\n  getUsersACs, getColorTheme,\r\n  getDialogsACs_compUsers,\r\n  getSmartUsersMediaData,\r\n  getThemesDelayFlag,\r\n} from \"../../../redux/selectors\";\r\nimport * as queryString from 'querystring'\r\n\r\nexport type UsersThemes_Type = {\r\n  userPageDnmc: string, generalHeaderDnmc: string, pagBTNDnmc: string, paginationSelectedDnmc: string, paginationDnmc: string, searchInputDnmc: string,\r\n  userAvaDnmc: string, followBTNDnmc: string, followBTN_ERR_DNMC: string, userNameDnmc: string, mapWrapperDnmc: string, userUnitDnmc: string, userWriteModeDnmc: string,\r\n  moreUserUnitsDnmc: string\r\n}\r\n\r\nexport type usersActions_Type = {\r\n  getUsersThunk: (pageSize: number, currentPage: number) => void\r\n  setCurrentPageThunk: (pageSize: number, currentPage: number) => void\r\n  followThunkToggler: (userId: number, isFollowed: boolean, error: string) => void\r\n  getCertainUserThunk: (pageSize: number, userName: string, pageOfEquals: number) => void\r\n  sendMessageToUserThunk: (userId: number, body: string, actionKey: string, userName: string) => void\r\n  setErrorToNull: () => void\r\n  componentStateCleaner: () => void\r\n}\r\n\r\nexport let UsersFuncContainer = () => {\r\n\r\n\r\n  let smartData = useSelector(getSmartUsersMediaData);\r\n  let dialogsACs = useSelector(getDialogsACs_compUsers);\r\n  let usersACs = useSelector(getUsersACs);\r\n  let colorTheme = useSelector(getColorTheme);\r\n  let themesDelayFlag = useSelector(getThemesDelayFlag);\r\n\r\n  let dispatch = useDispatch();\r\n  let usersActions: usersActions_Type = {\r\n    getUsersThunk: (pageSize: number, currentPage: number) => dispatch(usersACs.getUsersThunkAC(pageSize, currentPage)),\r\n    setCurrentPageThunk: (pageSize: number, currentPage: number) => dispatch(usersACs.setCurrentPageThunkAC(pageSize, currentPage)),\r\n    followThunkToggler: (userId: number, isFollowed: boolean, error: string) => dispatch(usersACs.followThunkTogglerAC(userId, isFollowed, error)),\r\n    getCertainUserThunk: (pageSize: number, userName: string, pageOfEquals: number) => { dispatch(usersACs.getCertainUserThunkAC(pageSize, userName, pageOfEquals)) },\r\n    sendMessageToUserThunk: (userId: number, body: string, actionKey: string, userName: string) => dispatch(dialogsACs.sendMessageToUserThunkAC(userId, body, actionKey, userName, -1)),\r\n    setErrorToNull: () => dispatch(usersACs.setErrorToNullAC()),\r\n    componentStateCleaner: () => { dispatch(usersACs.unMountCleaner()) }\r\n  }\r\n\r\n  let { pageSize, currentPage } = smartData;\r\n\r\n  let history = useHistory();\r\n  let queryRequest = useLocation().search;\r\n\r\n\r\n  const parsedString = queryString.parse(queryRequest);\r\n\r\n  let [wasClicked, setWasClicked] = useState(false)\r\n\r\n  useEffect(() => {\r\n\r\n    if (parsedString['?page'] && Number.isInteger(+parsedString['?page']) && !wasClicked && !parsedString['term']) { // выполняет ветку один раз - инфа  берется из линка\r\n      let pageFromLink = Math.trunc(+parsedString['?page'])\r\n      if (pageFromLink <= 0) pageFromLink = 1;\r\n      usersActions.getUsersThunk(pageSize, pageFromLink)\r\n      history.push({ pathname: 'users', search: `?page=${pageFromLink}` })\r\n      setWasClicked(true)\r\n    } else if (!parsedString['?page'] || !Number.isInteger(+parsedString['?page']) && !wasClicked) {\r\n      history.push({ pathname: 'users', search: `?page=${currentPage}` })\r\n      usersActions.getUsersThunk(pageSize, currentPage)\r\n      setWasClicked(true)\r\n    } else if (parsedString['term'] && parsedString['term'] !== '' && !wasClicked) { // проверка второго необязательного параметра\r\n      history.push({ pathname: 'users', search: `?page=${currentPage}&term=${parsedString['term']}` })\r\n      let termValue = parsedString.term as string\r\n      usersActions.getCertainUserThunk(pageSize, termValue, currentPage)\r\n      setWasClicked(true)\r\n    } else if (parsedString['term'] && parsedString['term'] !== '' && wasClicked) {\r\n      history.push({ pathname: 'users', search: `?page=${currentPage}&term=${parsedString['term']}` })\r\n    } else {\r\n      history.push({ pathname: 'users', search: `?page=${currentPage}` })\r\n    }\r\n\r\n    return () => { usersActions.componentStateCleaner() }\r\n\r\n  }, [currentPage])\r\n\r\n\r\n  let [themes, setThemes] = useState<UsersThemes_Type>({\r\n    userPageDnmc: '', generalHeaderDnmc: '', pagBTNDnmc: '', paginationSelectedDnmc: '', paginationDnmc: '', searchInputDnmc: '', userAvaDnmc: '',\r\n    followBTNDnmc: '', followBTN_ERR_DNMC: '', userNameDnmc: '', mapWrapperDnmc: '', userUnitDnmc: '', userWriteModeDnmc: '', moreUserUnitsDnmc: '',\r\n  });\r\n  useEffect(() => {\r\n    switch (colorTheme) {\r\n      case 'NIGHT':\r\n        return setThemes({\r\n          ...themes,\r\n          userPageDnmc: stl.usersPageN,\r\n          generalHeaderDnmc: stl.generalHeaderN,\r\n          pagBTNDnmc: stl.pagBTN_N,\r\n          paginationSelectedDnmc: stl.paginationSelectedN,\r\n          paginationDnmc: stl.paginationN,\r\n          searchInputDnmc: stl.searchInputN,\r\n          userAvaDnmc: stl.userAvaN,\r\n          followBTNDnmc: stl.followBTN_N,\r\n          followBTN_ERR_DNMC: stl.followBTN_ERR_N,\r\n          userNameDnmc: stl.userNameN,\r\n          mapWrapperDnmc: stl.mapWrapperN,\r\n          userUnitDnmc: stl.userUnitN,\r\n          userWriteModeDnmc: stl.userWriteModeN,\r\n          moreUserUnitsDnmc: stl.moreUserUnitsN,\r\n        });\r\n      case 'MORNING':\r\n        return setThemes({\r\n          ...themes,\r\n          userPageDnmc: stl.usersPageM,\r\n          generalHeaderDnmc: stl.generalHeaderM,\r\n          pagBTNDnmc: stl.pagBTN_M,\r\n          paginationSelectedDnmc: stl.paginationSelectedM,\r\n          paginationDnmc: stl.paginationM,\r\n          searchInputDnmc: stl.searchInputM,\r\n          userAvaDnmc: stl.userAvaM,\r\n          followBTNDnmc: stl.followBTN_M,\r\n          followBTN_ERR_DNMC: stl.followBTN_ERR_M,\r\n          userNameDnmc: stl.userNameM,\r\n          mapWrapperDnmc: stl.mapWrapperM,\r\n          userUnitDnmc: stl.userUnitM,\r\n          userWriteModeDnmc: stl.userWriteModeM,\r\n          moreUserUnitsDnmc: stl.moreUserUnitsM,\r\n        });\r\n      case 'DAY':\r\n        return setThemes({\r\n          ...themes,\r\n          userPageDnmc: stl.usersPageD,\r\n          generalHeaderDnmc: stl.generalHeaderD,\r\n          pagBTNDnmc: stl.pagBTN_D,\r\n          paginationSelectedDnmc: stl.paginationSelectedD,\r\n          paginationDnmc: stl.paginationD,\r\n          searchInputDnmc: stl.searchInputD,\r\n          userAvaDnmc: stl.userAvaD,\r\n          followBTNDnmc: stl.followBTN_D,\r\n          followBTN_ERR_DNMC: stl.followBTN_ERR_D,\r\n          userNameDnmc: stl.userNameD,\r\n          mapWrapperDnmc: stl.mapWrapperD,\r\n          userUnitDnmc: stl.userUnitD,\r\n          userWriteModeDnmc: stl.userWriteModeD,\r\n          moreUserUnitsDnmc: stl.moreUserUnitsD\r\n        });\r\n      case 'EVENING':\r\n        return setThemes({\r\n          ...themes,\r\n          userPageDnmc: stl.usersPageE,\r\n          generalHeaderDnmc: stl.generalHeaderE,\r\n          pagBTNDnmc: stl.pagBTN_E,\r\n          paginationSelectedDnmc: stl.paginationSelectedE,\r\n          paginationDnmc: stl.paginationE,\r\n          searchInputDnmc: stl.searchInputE,\r\n          userAvaDnmc: stl.userAvaE,\r\n          followBTNDnmc: stl.followBTN_E,\r\n          followBTN_ERR_DNMC: stl.followBTN_ERR_E,\r\n          userNameDnmc: stl.userNameE,\r\n          mapWrapperDnmc: stl.mapWrapperE,\r\n          userUnitDnmc: stl.userUnitE,\r\n          userWriteModeDnmc: stl.userWriteModeE,\r\n          moreUserUnitsDnmc: stl.moreUserUnitsE,\r\n        });\r\n    }\r\n  }, [colorTheme]);\r\n\r\n  return themes.userPageDnmc ?\r\n    <Users\r\n      usersInfo={smartData}\r\n      themes={themes}\r\n      usersFuncs={usersActions}\r\n      delayFlag={themesDelayFlag}\r\n    /> : null\r\n}\r\n\r\nexport default UsersFuncContainer;\r\n"],"sourceRoot":""}